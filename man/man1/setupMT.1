.TH setupMT 1 "27 April 2023" "MTINV Version 4.0.1" "MTINV Toolkit"

.SH NAME 
setupMT \- A helper application to autogenerate makeglib.csh file for computing Green's functions libraries given a set of SAC files downloaded from IRIS/EarthScope SAGE facility (see unpack.csh).  

.SH SYNOPSIS
setupMT 
-z [depth(km)]
-ev [lat lon]
-mod [model_basename]
-ot ["YYYY-MM-DDTHH:mm:SS.SS"]
-com ["Comment"]
-fil [lo_f(Hz) hi_f(Hz)]
-evid [eventID]
-exclude_sta [file name]
-gmt4
-interactive
-help
-verbose
[SAC file name(s)]
 
.SH DESCRIPTION
This program auto creates a makeglib.csh file that computes Green functions.
Add SAC files "../Data/*.BHZ.?.SAC" to tell setupMT which stations to use
in the moment tensor inversion
.sp
Added new feature -exclude_sta exclude_sta.txt, these stations listed in the file will be commented out in makeglib.csh file so no Green's functions will be computed and therefore no stations data will be processed.  Later the comments can be removed and rerun if needed.  The purpose of this is when processing aftershock or swarm sequences, repeating stations can be ignored if too close(clipping) or instrument problems require removal.
.br
The file exclude_sta.txt contains a list of station-codes, one per line.  
.sp

.TP
.B Depth range logic for autogenerated makeglib.csh
.PP
.in +2in
.EX
if( depth >= 0 && depth < 33 )
{
	fprintf( fp, "zrange=1,1,25\n" );
}
else if( depth >= 33 && depth < 100 )
{
	fprintf( fp, "zrange=10,10,100\n" );
}
	else if( depth >= 100 && depth < 300 )
{
	fprintf( fp, "zrange=10,20,300\n" );
}
else if( depth >= 300 && depth < 700 )
{
	fprintf( fp, "zrange=100,50,700\n" );
}
else
{
	fprintf( fp, "zrange=3,3,33\n" );
}
.EE
.in
.PP

.TP 
.B Sampling Rate (dt) logic for autogenerated makeglib.csh
.PP
.in +2in
.EX
dt = 0.35;
if( rdistkm < 2000 ) dt = 0.30;
if( rdistkm < 1000 ) dt = 0.25;
if( rdistkm < 800 )  dt = 0.20;
if( rdistkm < 450 )  dt = 0.18;
if( rdistkm < 400 )  dt = 0.16;
if( rdistkm < 340 )  dt = 0.15;
if( rdistkm < 320 )  dt = 0.14;
if( rdistkm < 300 )  dt = 0.13;
if( rdistkm < 280 )  dt = 0.12;
if( rdistkm < 260 )  dt = 0.11;
if( rdistkm < 240 )  dt = 0.10;
if( rdistkm < 220 )  dt = 0.09;
if( rdistkm < 200 )  dt = 0.08;
if( rdistkm < 180 )  dt = 0.07;
if( rdistkm < 160 )  dt = 0.07;
if( rdistkm < 140 )  dt = 0.06;
if( rdistkm < 120 )  dt = 0.05;
if( rdistkm < 50 )   dt = 0.04;
.EE
.in
.PP

.SH REQUIRED PARAMETERS

.TP
.B [SAC file name(s)]
A list of SAC files, only need one channel per station, accepts wildcards (e.g.,) *.??Z.SAC and/or *.??Z.?.SAC

.TP
.B -z [depth(km)]
-z or -depth (float) source depth in kilometers no default (doesn't overwrite SAC files), sets the zrange for mkgrnlib

.TP
.B -ev [lat lon]
-ev or -event (float float) source latitude and longitude in decimal degrees no default

.TP
.B -ot [origin time string]
-ot  or -origintime (string) source origin time format: YYYY/MM/DD,hh:mm:ss.ss or YYYY-MM-DDThh:mm:ss.ss

.TP
.B -com [comment string]
-com or -comment (string) a comment no default, use double quotes for spaces

.TP
.B -mod [model base filename]
-mod or -velocity_model (string) 1D model base filename, see ${MTINV_PATH}/data/modeldb/*.mod (default wus)

.SH OPTIONAL PARAMETERS

.TP
.B -fil [lf hf]
-fil or -filter (float float) bandpass filter frequency corners [default 0.02 0.05 Hz]

.TP
.B -gmt4
-gmt4 (boolean flag) creates all GMT www.generic-mapping-tools.org plots using older GMT version 4 [default GMT 5+ and 6+]

.TP
.B -h
-h or -help (boolean flag) prints this page default off

.TP
.B -evid [evid]
-evid (long int only) Event-Identification unique database key [default -1 null]

.TP
.B -int
-interactive or -int (boolean flag) interactive run script and display map on screen [default off]

.TP
.B -exclude_sta [filename]
-exclude_sta or -Xsta (string) file name.  Station codes to ignore, default off, no Greens func computed

.TP
.B -Nsta (float)

.TP
.B -Ngrn
-Ngrn       automatic maximum number of stations processed for Green's functions 

.TP
.B -MaxDistInv  
-MaxDistInv  automatic maximum distance for station made defining for MT inversion 

.TP
.B -MaxDistProc 
-MaxDistProc automatic maximum distance for stations processed for Green's functions 

.TP
.B -v 
-v or -verbose (boolean flag) verbose output


.SH EXAMPLES:

.PP
These examples are in the mtinv4_sampledata.tar.gz compressed tar archive available at https://sourceforge.net/projects/mtinv/
.sp

.TP
.B For ./mtinv4_sampledata/2009-12-22T055435_Kyrgystan/
setupMT -z  2 -ev 41.7392 +73.377 -mod wus -ot 2009-12-22T05:54:35 -com "Kambrata, Kyrgyzs" \\
  -fil 0.033 0.100 ../Data/*.??Z.?.SAC ../Data/*.??Z.SAC
.sp

.TP
.B For ./mtinv4_sampledata/2021-08-13T115717_Tennessee/
setupMT -z  2 -ev 35.8767 -84.898 -mod cus -ot 2021-08-13T11:57:35 -com "Franklin Mine,TN" \\
  -fil 0.075 0.120 ../Data/*.??Z.?.SAC ../Data/*.??Z.SAC
.sp

.TP
.B For ./mtinv4_sampledata/2021-11-18T025303_Missouri/
setupMT -z 16 -ev 36.9077 -90.543 -mod cus -ot 2021-11-18T02:53:03 -com "New Madrid, MO" \\
  -fil 0.075 0.150 ../Data/*.??Z.?.SAC ../Data/*.??Z.SAC
.sp

.TP
. B For ./mtinv4_sampledata/2023-04-25T153431_YellowSea/
setupMT -z 10 -ev 34.5379 122.567 -mod mdj2 -ot 2023-04-25T15:34:29.00 -com "Yellow Sea" \\
  -fil 0.02 0.05 ../Data/*Z.?.SAC ../Data/*Z.SAC
.sp

.SH "SEE ALSO"
.IR mkgrnlib (1),
.IR glib2sac (1),
.IR mtinv (1)
